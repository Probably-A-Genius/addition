<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Length Addition Trainer</title>
    <style>
        body {
            background-color: black;
            color: limegreen;
            font-family: monospace;
            text-align: center;
        }
        #problem-container {
            margin-top: 20px;
            font-size: 2em;
            line-height: 1.5em;
        }
        .number {
            display: block;
        }
        input[type="number"] {
            background-color: black;
            color: limegreen;
            border: none;
            border-bottom: 2px solid limegreen;
            font-size: 2em;
            text-align: center;
            width: 100px;
            outline: none;
        }
        #result {
            margin-top: 20px;
            font-size: 1.5em;
        }
        #report-container {
            margin-top: 20px;
            display: none;
        }
    </style>
</head>
<body>
    <h1>Length Addition Trainer</h1>

    <div>
        <label>Number of Rows:</label>
        <input type="number" id="numRows" value="5" min="1">
        <label>Digits per Row:</label>
        <input type="number" id="numDigits" value="2" min="1">
        <label>Number of Problems:</label>
        <input type="number" id="numProblems" value="10" min="1">
        <button onclick="startTrainer()">Start</button>
    </div>

    <div id="problem-container"></div>
    <div id="result"></div>

    <div id="report-container">
        <h2>Report</h2>
        <p id="mean-time"></p>
        <p id="fastest-time"></p>
        <p id="slowest-time"></p>
        <ul id="time-list"></ul>
    </div>

    <script>
        let problems = [];
        let currentProblem = 0;
        let startTime;
        let times = [];

        function generateProblem(rows, digits) {
            let problem = [];
            for (let i = 0; i < rows; i++) {
                let number = "";
                for (let j = 0; j < digits; j++) {
                    number += Math.floor(Math.random() * 10);
                }
                problem.push(Number(number));
            }
            return problem;
        }

        function displayProblem() {
            const container = document.getElementById('problem-container');
            container.innerHTML = '';

            problems[currentProblem].forEach(num => {
                const div = document.createElement('div');
                div.className = 'number';
                div.textContent = num;
                container.appendChild(div);
            });

            const input = document.createElement('input');
            input.type = 'number';
            input.oninput = checkAnswer;
            container.appendChild(input);
            input.focus();

            startTime = Date.now();
        }

        function checkAnswer(e) {
            const answer = parseInt(e.target.value);
            const correctAnswer = problems[currentProblem].reduce((a, b) => a + b, 0);

            if (answer === correctAnswer) {
                const endTime = Date.now();
                times.push((endTime - startTime) / 1000);

                currentProblem++;
                if (currentProblem < problems.length) {
                    displayProblem();
                } else {
                    showReport();
                }
            }
        }

        function startTrainer() {
            const numRows = parseInt(document.getElementById('numRows').value);
            const numDigits = parseInt(document.getElementById('numDigits').value);
            const numProblems = parseInt(document.getElementById('numProblems').value);

            problems = Array.from({ length: numProblems }, () => generateProblem(numRows, numDigits));
            currentProblem = 0;
            times = [];

            document.getElementById('report-container').style.display = 'none';
            displayProblem();
        }

        function showReport() {
            const meanTime = times.reduce((a, b) => a + b, 0) / times.length;
            const fastestTime = Math.min(...times);
            const slowestTime = Math.max(...times);

            document.getElementById('mean-time').textContent = `Mean Time: ${meanTime.toFixed(2)}s`;
            document.getElementById('fastest-time').textContent = `Fastest Time: ${fastestTime.toFixed(2)}s`;
            document.getElementById('slowest-time').textContent = `Slowest Time: ${slowestTime.toFixed(2)}s`;

            const timeList = document.getElementById('time-list');
            timeList.innerHTML = '';
            times.forEach((time, i) => {
                const li = document.createElement('li');
                li.textContent = `Problem ${i + 1}: ${time.toFixed(2)}s`;
                timeList.appendChild(li);
            });

            document.getElementById('report-container').style.display = 'block';
        }
    </script>
</body>
</html>
